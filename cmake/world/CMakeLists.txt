PROJECT(world)
SET( prefix ${ROOT_PATH}/src/world )
SET(sources
  DBC/DBCStores.cpp
	AchievementMgr.cpp 
	CollideInterface.cpp  
	VoiceChatHandler.cpp 
	DayWatcherThread.cpp 
	CommonScheduleThread.cpp 
	ArenaTeam.cpp 
	PacketHandlers/ArenaTeamHandler.cpp 
	DatabaseCleaner.cpp 
	ObjectStorage.cpp  
	AddonMgr.cpp 
	AIInterface.cpp 
	AIEvents.cpp
	PacketHandlers/AreaTrigger.cpp 
	Arenas.cpp 
	AuctionHouse.cpp 
	PacketHandlers/AuctionHouseHandler.cpp
	AuctionMgr.cpp 
	Battleground.cpp
	BattlegroundCommands.cpp 
	PacketHandlers/BattlegroundHandler.cpp 
	BattlegroundMgr.cpp 
	Channel.cpp 
	PacketHandlers/ChannelHandler.cpp 
	PacketHandlers/CharacterHandler.cpp 
	Chat.cpp 
	PacketHandlers/ChatHandler.cpp 
	PacketHandlers/CombatHandler.cpp 
	Entities/Container.cpp 
	Entities/Corpse.cpp 
	Entities/Creature.cpp 
	CreatureCommands.cpp
	Entities/Summons/Summon.cpp
	Entities/Summons/CompanionSummon.cpp
	Entities/Summons/GuardianSummon.cpp
	Entities/Summons/PossessedSummon.cpp
	Entities/Summons/TotemSummon.cpp
	Entities/Summons/WildSummon.cpp
	debugcmds.cpp 
	PacketHandlers/DuelHandler.cpp 
	Entities/DynamicObject.cpp 
	EquipmentSetMgr.cpp
	EventableObject.cpp 
	EventMgr.cpp 
	faction.cpp 
	Entities/GameObject.cpp 
	PacketHandlers/GMTicketHandler.cpp 
	GMTicketCommands.cpp
	Gossip.cpp
	Group.cpp 
	PacketHandlers/GroupHandler.cpp 
	Guild.cpp 
	GuildHandler.cpp 
	HonorHandler.cpp 
	InstanceCommands.cpp 
	Entities/Item.cpp
	ItemCommands.cpp
	ItemHandler.cpp 
	ItemInterface.cpp 
	Level0.cpp 
	Level1.cpp 
	Level2.cpp 
	Level3.cpp 
	LfgHandler.cpp 
	LfgMgr.cpp 
	LootMgr.cpp 
	LocalizationMgr.cpp 
	LogonSocket.cpp 
	LogonCommHandler.cpp 
	MailMessage.cpp
	MailBox.cpp
	MailHandler.cpp
	MailSystem.cpp 
	MapCell.cpp 
	Map.cpp 
	MapScriptInterface.cpp 
	MapMgr.cpp 
	MessageRouter.cpp
	Messenger.cpp
	MiscHandler.cpp 
	MovementHandler.cpp 
	NPCHandler.cpp 
	Entities/Object.cpp 
	ObjectMgr.cpp 
	Opcodes.cpp 
	Entities/Pet.cpp 
	PetHandler.cpp 
	Entities/Player.cpp 
	PlayerCommands.cpp
	PlayerMessenger.cpp
	Entities/PlayerPacketWrapper.cpp 
	QueryHandler.cpp 
	Quest.cpp 
	QuestHandler.cpp 
	QuestMgr.cpp 
	QuestCommands.cpp 
	RaidHandler.cpp 
	RecallCommands.cpp 
	ReputationHandler.cpp 
	ScriptMgr.cpp 
	SocialHandler.cpp 
	SpeedDetector.cpp 
	Spell/SpellAuras.cpp 
	Spell/SpellTarget.cpp 
	Spell/Spell.cpp 
	StdAfx.cpp
	SummonHandler.cpp
	Spell/SpellEffects.cpp 
	Spell/SpellHandler.cpp 
	HackFixes.cpp 
	Stats.cpp 
	TaxiHandler.cpp 
	TaxiMgr.cpp 
	TerrainMgr.cpp 
	TradeHandler.cpp
	Entities/Transporter.cpp
	Entities/Unit.cpp 
	UpdateBuilder.cpp
	Vehicle.cpp 
	VehicleHandler.cpp
	WayPoints.cpp 
	WeatherMgr.cpp 
	World.cpp 
	WorldCreator.cpp 
	WorldSession.cpp 
	WorldSocket.cpp 
	WorldStatesHandler.cpp
	WorldRunnable.cpp 
	WordFilter.cpp 
	Main.cpp 
	Master.cpp 
	CConsole.cpp 
	ConsoleCommands.cpp 
	ConsoleListener.cpp 
	WUtil.cpp 
	Spell/SpellProc.cpp
	Spell/SpellProc_DeathKnight.cpp
	Spell/SpellProc_Druid.cpp
	Spell/SpellProc_Hunter.cpp
	Spell/SpellProc_Items.cpp
	Spell/SpellProc_Mage.cpp
	Spell/SpellProc_Paladin.cpp
	Spell/SpellProc_Priest.cpp
	Spell/SpellProc_Rogue.cpp
	Spell/SpellProc_Shaman.cpp
	Spell/SpellProc_Warlock.cpp
	Spell/SpellProc_Warrior.cpp
	Spell/SpellMgr.cpp
	Spell/Spell_DeathKnight.cpp
	Spell/Spell_Druid.cpp
	Spell/Spell_Hunter.cpp
	Spell/Spell_Mage.cpp
	Spell/Spell_Paladin.cpp
	Spell/Spell_Priest.cpp
	Spell/Spell_Rogue.cpp
	Spell/Spell_Shaman.cpp
	Spell/Spell_Warlock.cpp
	Spell/Spell_Warrior.cpp
	Entities/DeathKnight.cpp
	Entities/Druid.cpp
	Entities/Hunter.cpp
	Entities/Mage.cpp
	Entities/Paladin.cpp
	Entities/Priest.cpp
	Entities/Rogue.cpp
	Entities/Shaman.cpp
	Entities/Warlock.cpp
	Entities/Warrior.cpp
	WowCrypt.cpp )

SET( headers
	AchievementMgr.h
	AddonMgr.h
	AIInterface.h
	AIEvents.h
	AreaTrigger.h
	Arenas.h
	ArenaTeam.h
	AuctionHouse.h
	AuctionMgr.h
	BaseConsole.h
	Battleground.h
	BattlegroundMgr.h
	ByteBufferExtension.h
	CConsole.h
	CellHandler.h
	Channel.h
	ChannelMgr.h
	Chat.h
	CollideInterface.h
	CommonScheduleThread.h
	Entities/Summons/CompanionSummon.h
	ConsoleCommands.h
	Entities/Container.h
	Entities/Corpse.h
	Entities/Creature.h
	CreatureCommands.h
	DatabaseCleaner.h
	DayWatcherThread.h
	DBC/DBCStores.h
	Entities/DeathKnight.h
	Definitions.h
	Entities/Druid.h
	Entities/DynamicObject.h
	EquipmentSetMgr.h
	Events.h
	EventableObject.h
	EventMgr.h
	faction.h
	Entities/GameObject.h
	Gossip.h
	Group.h
	Entities/Summons/GuardianSummon.h
	Guild.h
	HonorHandler.h
	Entities/Hunter.h
	Entities/Item.h
	ItemCommands.h
	ItemInterface.h
	ItemIterator.h
	ItemPrototype.h
	LfgMgr.h
	LocalizationMgr.h
	LocationVector.h
	LogonSocket.h
	LogonCommHandler.h
	LootMgr.h
	Entities/Mage.h
	MailMessage.h
	MailBox.h
	MailSystem.h
	MainServerDefines.h
	Map.h
	MapCell.h
	MapMgr.h
	MapScriptInterface.h
	Master.h
	MessageRouter.h
	Messenger.h
	MiscHandler.h
	NameTables.h
	NPCHandler.h
	Entities/ObjectConstants.h
	Entities/Object.h
	ObjectMgr.h
	ObjectStorage.h
	Opcodes.h
	Entities/Paladin.h
	Entities/Pet.h
	Entities/Player.h
	Entities/PlayerCache.h
	PlayerCommands.h
	PlayerMessenger.h
	Entities/Summons/PossessedSummon.h
	Entities/Priest.h
	Quest.h
	QuestMgr.h
	Entities/Rogue.h
	ScriptMgr.h
	ScriptSetup.h
	Entities/Shaman.h
	Skill.h
	SkillNameMgr.h
	SpawnTimedEmotes.h
	SpeedDetector.h
	Spell/Spell.h
	Spell/SpellAuras.h
	Spell/SpellFailure.h
	Spell/SpellMgr.h
	Spell/SpellNameHashes.h
	Spell/SpellProc.h
	Spell/SpellTarget.h
	Stats.h
	StdAfx.h
	Entities/Summons/Summon.h
	SummonHandler.h
	TaxiMgr.h
	TerrainMgr.h
	Entities/Summons/TotemSummon.h
	Entities/Transporter.h
	Entities/Unit.h
	UpdateBuilder.h
	UpdateFields.h
	UpdateMask.h
	Vehicle.h
	Entities/Warlock.h
	Entities/Warrior.h
	Waypoint.h
	WeatherMgr.h
	Entities/Summons/WildSummon.h
	WordFilter.h
	World.h
	WorldConfig.h
	WorldCreator.h
	WorldRunnable.h
	WorldSession.h
	WorldSocket.h
	WorldStatesHandler.h
	WorldStates.h
	WowCrypt.h
	WoWGuid.h
	WUtil.h
)
	

foreach(src IN ITEMS ${sources} )
  SET( SRCS ${SRCS} ${prefix}/${src} )
endforeach(src)
foreach(src IN ITEMS ${headers} )
  SET( HEADERS ${HEADERS} ${prefix}/${src} )
endforeach(src)

include(PCHSupport)
include_directories( ${GLOBAL_INCLUDE_DIRS} )
link_directories( ${DEPENDENCY_LIBS} ${EXTRA_LIBS_PATH} )

add_executable( ${PROJECT_NAME} ${SRCS} ${HEADERS} )

IF( CMAKE_GENERATOR MATCHES Visual*)
	ADD_NATIVE_PRECOMPILED_HEADER(${PROJECT_NAME} StdAfx.h ${prefix}/StdAfx.cpp)
ENDIF()
set_target_properties(${PROJECT_NAME} PROPERTIES ENABLE_EXPORTS TRUE)

add_dependencies( ${PROJECT_NAME} shared g3dlite vmaplib detour recast)
target_link_libraries( ${PROJECT_NAME} shared  g3dlite vmaplib detour recast ${PCRE_LIBRARIES} )
install(TARGETS ${PROJECT_NAME} RUNTIME DESTINATION .)

ENABLE_TESTING()

ADD_EXECUTABLE( WorldUtilTest ${prefix}/Tests/UtilTest.cpp )
ADD_DEPENDENCIES( WorldUtilTest ${PROJECT_NAME} )
TARGET_LINK_LIBRARIES( WorldUtilTest shared ${PROJECT_NAME} )
ADD_TEST( NAME WorldUtilTest COMMAND WorldUtilTest )

IF( WIN32 )
	FILE( COPY ${INSTALLED_DEPENDENCIES} DESTINATION ${CMAKE_CURRENT_BINARY_DIR} )
ENDIF( WIN32 )
